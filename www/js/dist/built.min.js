"use strict";$(function(){FastClick.attach(document.body)});var app=angular.module("app",["ngRoute","ngAnimate"]);app.config(["$routeProvider",function(a){a.when("/login",{templateUrl:"partials/login/login.html",controller:"LoginController"}).when("/login/recover",{templateUrl:"partials/login/recover.html",controller:"RecoverController"}).when("/home",{templateUrl:"partials/home/home.html",controller:"HomeController"}).when("/forms",{templateUrl:"partials/forms/forms.html",controller:"FormsController"}).when("/listview",{templateUrl:"partials/listview/listview.html",controller:"ListViewController"}).when("/detailDefault/:id",{templateUrl:"partials/details/detailDefault.html",controller:"DetailController"}).when("/calendar",{templateUrl:"partials/calendar/calendar.html",controller:"CalendarController"}).when("/swiper",{templateUrl:"partials/swiper/swiper.html",controller:"SwiperController"}).when("/map",{templateUrl:"partials/map/map.html",controller:"MapController"}).when("/chartsjs",{templateUrl:"partials/charts/chartsjs.html",controller:"ChartsjsController"}).when("/d3Charts",{templateUrl:"partials/charts/d3Charts.html",controller:"D3ChartsController"}).otherwise({redirectTo:"/login"})}]),app.controller("MainController",["$scope","$element","ConfigFactory",function(a,b,c){a.config=c,a.getWidth=function(){return $(window).width()},a.getHeight=function(){return $(window).height()},a.$watch(a.getWidth,function(b){a.window_width=b}),a.$watch(a.getHeight,function(b){a.window_height=b}),window.onresize=function(){a.$apply()},a.contentStyles=function(){var c=a.window_height,d=0;if(a.config.hasFooter&&(c-=b.find("#footer").outerHeight()),a.config.hasHeader){var e=b.find("#header").outerHeight();c-=e,d=e}return"height:"+c+"px; top:"+d+"px"},a.toggleSideNav=function(){b.find("#wrapper").toggleClass("open"),b.find("#sideNav").toggleClass("open")}}]),app.factory("ConfigFactory",[function(){return{server:{services:"http://192.237.180.31/dhm/public/api/",assets:"http://192.237.180.31/dhm/public/"},title:"Angular boilerplate from factory",hasFooter:!0,hasHeader:!1,hasSideNavigation:!1}}]),app.controller("CalendarController",["$scope","$rootScope","$location","ConfigFactory",function(a,b,c,d){d.title="Calendar",d.hasHeader=!0,d.hasFooter=!0,d.hasSideNavigation=!0,a.config=d,a.events=[{date:"2014-01-09",title:"Lorem ipsum dolor sit.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 2.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 3.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 4.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 5.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Lorem ipsum dolor sit 6.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-09",title:"Quickly embrace high standards in.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-12",title:"Quickly deliver state of.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-18",title:"Compellingly re-engineer client.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-02-22",title:"Appropriately expedite",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-11",title:"Lorem ipsum dolor sit.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-13",title:"Quickly embrace high standards in.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-13",title:"Quickly deliver state of.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-23",title:"Compellingly re-engineer client.",url:"http://github.com/kylestetz/CLNDR"},{date:"2014-03-26",title:"Appropriately expedite",url:"http://github.com/kylestetz/CLNDR"}],a.calendarDayClick=function(a){a.events.length>0&&b.$emit("makeModal",{options:{template:"partials/modals/calendarModal.html",cancelText:"Yep",acceptText:"Ok, go.",title:"Events on "+a.date._i},data:a.events})}}]),app.directive("mbCalendar",["$rootScope",function(){return{priority:1200,scope:{events:"=",calendarDayClick:"="},link:function(a,b){var c="<div class='clndr-controls row'><div class='clndr-control-button column small-2'><span class='clndr-previous-button entypo-font'>&#59237;</span></div><div class='month column small-8 tac'><%= month %> <%= year %></div><div class='clndr-control-button rightalign column small-2'><span class='clndr-next-button entypo-font tar'>&#59238;</span></div></div><table class='clndr-table' border='0' cellspacing='0' cellpadding='0'><thead><tr class='header-days'><% for(var i = 0; i < daysOfTheWeek.length; i++) { %><td class='header-day'><%= daysOfTheWeek[i] %></td><% } %></tr></thead><tbody><% for(var i = 0; i < numberOfRows; i++){ %><tr><% for(var j = 0; j < 7; j++){ %><% var d = j + i * 7; %><td class='<%= days[d].classes %>'><div class='day-contents'><%= days[d].day %></div></td><% } %></tr><% } %></tbody></table>";$(b).clndr({template:c,events:a.events,clickEvents:{click:function(b){"function"==typeof a.calendarDayClick&&a.calendarDayClick(b)},onMonthChange:function(a){console.log("you just went to "+a.format("MMMM, YYYY"))}},doneRendering:function(){console.log("this would be a fine place to attach custom event handlers.")}})}}}]),app.controller("ChartsjsController",["$scope","$timeout","ConfigFactory",function(a,b,c){c.title="Chart.js",c.hasHeader=!0,c.hasFooter=!1,c.hasSideNavigation=!0,a.config=c;{var d=$("#myChart").get(0).getContext("2d"),e={scaleOverlay:!1,scaleOverride:!0,scaleSteps:10,scaleStepWidth:1,scaleStartValue:0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null},f={labels:["CÃ³lico","Dolor\nCabeza","Dolor Espalda","Nauseas"],datasets:[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",data:[6,2,3,5]}]};new Chart(d).Line(f,e)}}]),app.controller("D3ChartsController",["$scope","$timeout","ConfigFactory",function(a,b,c){c.title="d3 Charts",c.hasHeader=!0,c.hasFooter=!1,c.hasSideNavigation=!0,a.config=c;var d=[{name:"Colico",value:5},{name:"Dolor cabeza",value:6},{name:"Dolor espalda",value:8},{name:"Nauseas",value:6}],e=d3.select(".d3-chart-bar").selectAll("div").data(d),f=e.enter().append("div").attr("class","row bar-row");f.append("div").attr("class","column small-2 tar bar-text").text(function(a){return a.name});var g=f.append("div").attr("class","column small-10").append("div").attr("class"," bar-bar").text(function(a){return a.value});b(function(){g.style("width",function(a){return 10*a.value+"%"})},300)}]),app.controller("DetailController",["$scope","$routeParams","$location","ConfigFactory","MusicService",function(a,b,c,d,e){d.title=b.id,d.hasHeader=!0,d.hasFooter=!1,d.hasSideNavigation=!0,a.config=d,a.itemId=b.id;var f=function(b,c){a.item=b.album,console.log(c)};e.getDetail(b.id).success(f)}]),app.directive("mbLoadingPopOver",["$rootScope",function(a){return{templateUrl:"partials/loadingPopOver.html",link:function(b,c,d){b.title=""!==d.mbLoadingPopOver?d.mbLoadingPopOver:"Loading content",c.on("click",function(){e()});var e=function(){$("#wrapper").removeClass(b.filter),c.removeClass("visible")},f=function(){$("#wrapper").addClass(b.filter),c.addClass("visible")};a.$on("showLoadingPopOver",function(a,c){b.filter=void 0!==c?c.filter:"blur-filter",f(c)}),a.$on("hideLoadingPopOver",function(){e()})}}}]),app.directive("mbModalBox",["$http","$compile","$timeout","$rootScope","$templateCache","ConfigFactory",function(a,b,c,d,e,f){return{scope:!0,link:function(c,g){var h={cancelText:"CANCELAR",acceptText:"OK",title:"Alert"},i=function(d){d.options.template?a.get(d.options.template,{cache:e}).success(function(a){c.defaults=$.extend({},h,d.options),f.wrapperIsBlured=!0,d.data&&(c.data=d.data),$(g).find(".content").empty(),$(g).find(".content").append(b(a)(c)),$(g).addClass("show")}).error(function(){console.log("The modal cannot load the template you provided")}):console.log("The modal cannot be displayed. You have to provide a valid template URL")};d.$on("makeModal",function(a,b){i(b)}),c.closeModal=function(){$(g).removeClass("show"),f.wrapperIsBlured=!1}}}}]),app.directive("mbToast",["$rootScope","$timeout",function(a,b){return{scope:!0,link:function(c){function d(a){c.messages.push(a),e()}function e(){b(function(){c.messages.splice(0,1)},2500)}c.messages=[],a.$on("makeToast",function(a,b){d(b)})}}}]),app.filter("upperCase",function(){return function(a){return a.toUpperCase()}}),app.controller("FormsController",["$scope","$location","ConfigFactory",function(a,b,c){c.title="Forms",c.hasHeader=!0,c.hasFooter=!0,c.hasSideNavigation=!0,a.config=c}]),app.controller("HomeController",["$scope","$rootScope","$timeout","ConfigFactory",function(a,b,c,d){d.title="Angular boilerplate titulo",d.hasHeader=!0,d.hasFooter=!1,d.hasSideNavigation=!0,a.emitToast=function(a){b.$emit("makeToast",{title:"This is an emmited toast",type:a})},a.emitModal=function(a){b.$emit("makeModal",{options:{template:a,cancelText:"Dont fire that",acceptText:"Lets rock!",title:"Modal demo"}})},a.showLoading=function(){b.$emit("showLoadingPopOver",{filter:"blur-filter"})},c(function(){var a=$(".page");a.removeClass("page"),c(function(){a.addClass("page")},600)},600)}]),app.controller("ListViewController",["$scope","$location","ConfigFactory","MusicService",function(a,b,c,d){c.title="List View",c.hasHeader=!0,c.hasFooter=!0,c.hasSideNavigation=!0,a.config=c,a.loginData={};var e=function(b,c){a.items=b.results.albummatches.album,console.log(c)};d.getStores().success(e),a.getDetails=function(a){b.path("detailDefault/"+a.name),console.log(a)}}]),app.controller("LoginController",["$scope","$rootScope","$location","ConfigFactory",function(a,b,c,d){d.title="Login",d.hasHeader=!0,d.hasFooter=!1,d.hasSideNavigation=!1,a.loginData={},a.loginSubmit=function(){console.log(a.loginData),c.path("/home")}}]),app.controller("RecoverController",["$scope","$rootScope","$location","ConfigFactory",function(a,b,c,d){d.title="Recover your password",d.hasHeader=!0,d.hasFooter=!1,d.hasSideNavigation=!1,a.mailsent=!1,a.recoverSubmit=function(){a.mailsent=!a.mailsent}}]),app.controller("MapController",["$scope","$log","ConfigFactory","StoresModel",function(a,b,c,d){c.title="Map demo",c.hasHeader=!0,c.hasFooter=!0,c.hasSideNavigation=!0,a.mapOptions={zoom:13,center:{lat:4.582226749273246,lng:-74.09687547013164}},a.branches="",a.markerClick=function(a){alert("marker clicked",a)};var e=function(b){a.branches=b[3].branches};d.getStores().success(e)}]),app.directive("mbGmap",["$rootScope","$parse",function(){return{scope:{markers:"=",options:"=",markerClick:"="},link:function(a,b){var c,d={zoom:13,center:{lat:4.582226749273246,lng:-74.09687547013164}};a.defaults=$.extend({},d,a.options);var e=function(){var d={zoom:a.defaults.zoom,center:new google.maps.LatLng(a.defaults.center.lat,a.defaults.center.lng)};c=new google.maps.Map($(b).get(0),d)};e(),a.$watch("markers",function(){a.markers&&f()});var f=function(){if(a.markers.length>0)for(var b=0;b<a.markers.length-100;b++)if(a.markers[b].lat&&a.markers[b].lng){var d=new google.maps.LatLng(a.markers[b].lat,a.markers[b].lng),e=new google.maps.Marker({position:d,map:c});g(e)}},g=function(b){google.maps.event.addListener(b,"click",function(){return"function"==typeof a.markerClick?a.markerClick(b):void 0})}}}}]),app.factory("MusicService",["$http","$rootScope","ConfigFactory",function(a,b){return{getStores:function(){return b.$emit("showLoadingPopOver"),a.get("http://ws.audioscrobbler.com/2.0/?method=album.search&album=red+hot+chilli&artist=red+hot+chilli&api_key=77725761af78cf82f9d7a9b304be958e&format=json").error(function(){b.$emit("hideLoadingPopOver"),b.$emit("makeToast",{title:"Algo salio mal por favor vuelve a intentarlo",type:"error"})}).success(function(a){b.$emit("hideLoadingPopOver"),console.log(a)})},getDetail:function(c){return a.get("http://ws.audioscrobbler.com/2.0/?method=album.getinfo&artist=red+hot+chilli+peppers&album="+c+"&api_key=77725761af78cf82f9d7a9b304be958e&format=json").error(function(){b.$emit("makeToast",{title:"Algo salio mal por favor vuelve a intentarlo",type:"error"})}).success(function(a){console.log(a)})}}}]),app.factory("StoresModel",["$http","$rootScope","ConfigFactory",function(a,b){return{getStores:function(){return a.get("http://192.237.180.31/dhm/public/api/stores?branches=true&offers=true").error(function(){b.$emit("makeToast",{title:"Algo salio mal por favor vuelve a intentarlo",type:"error"})}).success(function(){})}}}]),app.controller("SwiperController",["$scope","$location","ConfigFactory",function(a,b,c){c.title="Swiper plugin",c.hasHeader=!0,c.hasFooter=!1,c.hasSideNavigation=!0,a.config=c,a.swithcExample=function(b){a.exampleDisplayed=b}}]),app.directive("mbSwiper",[function(){return{scope:!0,link:function(a,b){b.swiper({pagination:".pagination",loop:!0,grabCursor:!0,paginationClickable:!0})}}}]),app.directive("mbSwiperScroll",[function(){return{template:'<div class="swiper-scrollbar swiper-scrollbar-vertical"></div><div class="swiper-wrapper"><div class="swiper-slide" ng-transclude></div></div></div>',transclude:!0,scope:!0,link:function(a,b){$(b).swiper({scrollContainer:!0,mode:"vertical",scrollbar:{container:".swiper-scrollbar"}})}}}]);